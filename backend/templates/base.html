<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SubMatch - Discover Subreddits</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="banner">SubMatch</div>

    <div class="input-box">
        <input class="keyword-input" placeholder="Keyword 1" id="keyword1">
        <input class="keyword-input" placeholder="Keyword 2" id="keyword2">
        <input class="keyword-input" placeholder="Keyword 3" id="keyword3">
        <button class="find-button" onclick="findSubreddits()">Find Subreddits</button>
    </div>

    <div id="answer-box"></div>

    <script>
        function findSubreddits() {
            const keywords = [
                document.getElementById("keyword1").value,
                document.getElementById("keyword2").value,
                document.getElementById("keyword3").value
            ].join(" ");

            fetch(`/recommend?query=${encodeURIComponent(keywords)}`)
                .then(response => response.json())
                .then(data => {
                    const answerBox = document.getElementById("answer-box");
                    answerBox.innerHTML = ""; // Clear previous results

                    const subreddits = data.slice(0, 3); // Get the first three subreddits

                    if (subreddits.length === 0) {
                        const div = document.createElement("div");
                        div.textContent = "No subreddits found.";
                        answerBox.appendChild(div);
                    } else {
                        subreddits.forEach(subreddit => {
                            const link = document.createElement("a");
                            link.href = `https://www.reddit.com/r/${subreddit}`;
                            link.target = "_blank";
                            link.textContent = subreddit;

                            const div = document.createElement("div");
                            div.textContent = "Recommended subreddit: ";
                            div.appendChild(link);

                            answerBox.appendChild(div);
                        });
                    }
                })
                .catch(error => console.error('Error fetching data:', error));
        }
    </script>
</body>
</html>